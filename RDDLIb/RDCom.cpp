#include "pch.h"
#include "RDCom.h"

using namespace RDDLib::comm;
/*
extern "C" char *getenv(char *envvar)
{
	return NULL;
}
*/
float RDGlobal::zoom_level = 3;
/*
byte RDPDFLib::pdf::g_tiny_bmp[102] =
{
	0x42, 0x4D, 0x66, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x36, 0x00, 0x00, 0x00, 0x28, 0x00,
	0x00, 0x00, 0x04, 0x00, 0x00, 0x00, 0x04, 0x00, 0x00, 0x00, 0x01, 0x00, 0x18, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x30, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF
};
*/

char* cvt_str_cstr(String^ str)
{
	if (!str) return NULL;
	const wchar_t* wstr = str->Data();
	int wlen = str->Length();
	char* data = (char*)malloc((wlen + 1) * 2);
	int len = ::WideCharToMultiByte(CP_ACP, 0, wstr, wlen, data, (wlen + 1) * 2, NULL, NULL);
	data[len] = 0;
	return data;
}
String^ cvt_cstr_str(const char* str)
{
	if (!str || !str[0]) return nullptr;
	int len1 = strlen(str) + 2;
	wchar_t* wtxt = (wchar_t*)malloc(sizeof(wchar_t) * len1);
	int len = MultiByteToWideChar(CP_ACP, 0, str, -1, wtxt, len1);
	wtxt[len] = 0;
	String^ ret = ref new String(wtxt);
	free(wtxt);
	return ret;
}
